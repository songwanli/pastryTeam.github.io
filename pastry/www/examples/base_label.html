<!--
name:Label
platform:all
group:base
desc:标签
-->
<!DOCTYPE html>
<html>
<head>
    <title>Label</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta content="telephone=no" name="format-detection"/>
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">

    <!--引入框架-->
    <script type="text/javascript" src="../pastry/main.js"
            data-debug="@mockdata"
            ></script>
</head>

<body>
    <!--设置加载页-->
    <div data-page-loading>
        Loading...
    </div>
</body>
</html>

<!-- 模板定义 -->
<script type="text/template" id="tp_HomePage" data-title="Label">
    <span type="text" data-component="Label" data-name="TEXT"></span>
    <br/>
    <span type="text" data-component="Label" data-name="TEXT2" id="label"></span>
</script>

<script type="text/javascript">
    $(function (param) {
        var Browser = this.Browser;
        var Model = this.Model;
        var api = this.api;

        api.setModels({
            'homePage': new Model.Request(
                    {
                        TEXT: 'Hello World! default'
                    },
                    {
                        url: 'helloworld.do?act=getText'
                    }
            )});
        var option = {
            refresh: [
                {
                    id: 'homePage'
                },
                {
                    id: 'label',
                    initVal: {
                        TEXT2: 100
                    }
                }
            ]
        };
        Browser.history_goto("homePage", option);

        setTimeout(function () {
            api.getComponent('label').setValue(200);
            alert(JSON.stringify(api.getComponent('label').model.toJSON()));

        }, 2000);
    });
</script>
