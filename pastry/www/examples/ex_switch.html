<!--
name:Switch
platform:all
group:ex
desc:开关按钮
-->
<!DOCTYPE html>
<html>
<head>
    <title>Switch</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta content="telephone=no" name="format-detection" />
    <meta http-equiv="Pragma" content="no-cache">

    <!--引入框架-->
    <script type="text/javascript" src="../pastry/main.js"
            data-components="C:switch"
            ></script>
</head>
<body>
    <!--设置加载页-->
    <div data-page-loading>
        Loading...
    </div>
</body>
</html>

<script type="text/template" id="tp_HomePageID" data-component="HomePage" data-title="Switch">

    <input type="checkbox" data-name="SWITCH" data-component="Switch" id="switch" />
    <br/>
    <input type="button" class="btn" value="显示SWITCH值" data-submit-button="displaySwitch" />
    <br/>
    <input type="button" class="btn" value="切换SWITCH值" data-submit-button="switchValue" />
</script>

<script type="text/javascript">
    $(function (param) {
        var Browser = this.Browser;
        var Component = this.Component;
        var api = this.api;

        Component.HomePage = Component.Page.extend({
            onSubmit: function (event) {
                var data = event.data;
                var submitId = event.id;

                if (submitId == 'displaySwitch') {
                    
                    // 显示 SWITCH 的值
                    alert('onSubmitId:'+submitId+'\n'+JSON.stringify(data));

                } else if (submitId == 'switchValue') {

                    // 切换 SWITCH 的值
                    // 推荐用法
                    var currentState = api.getModel('switch').getValue();
                    api.getModel('switch').setValue(!currentState);
                    
                    // 可选用法
                    // var currentState = api.getComponent('switch').getValue();
                    // api.getComponent('switch').setValue(!currentState);
                }
            }
        });

        var option = {
            refresh:{
                id:'switch',
                initVal:{
                    SWITCH:true
                }
            }
        };

        Browser.history_goto('tp_HomePageID',option);
    });
</script>
