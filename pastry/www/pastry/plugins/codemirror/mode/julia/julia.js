!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("julia",function(e,t){function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){var t=i(e);return"["==t?!0:!1}function i(e){return 0==e.scopes.length?null:e.scopes[e.scopes.length-1]}function a(e,t){if(e.match(/^#=\s*/)&&t.scopes.push("#="),"#="==i(t)&&e.match(/^=#/))return t.scopes.pop(),"comment";if(t.scopes.indexOf("#=")>=0)return e.match(/.*?(?=(#=|=#))/)||e.skipToEnd(),"comment";var r=t.leavingExpr;if(e.sol()&&(r=!1),t.leavingExpr=!1,r&&e.match(/^'+/))return"operator";if(e.match(/^\.{2,3}/))return"operator";if(e.eatSpace())return null;var a=e.peek();if("#"===a)return e.skipToEnd(),"comment";"["===a&&t.scopes.push("[");var h=i(t);"["==h&&"]"===a&&(t.scopes.pop(),t.leavingExpr=!0),"("==h&&")"===a&&(t.scopes.pop(),t.leavingExpr=!0);var m;if(!n(t)&&(m=e.match(k,!1))&&t.scopes.push(m),!n(t)&&e.match(x,!1)&&t.scopes.pop(),n(t)){if("end"==t.lastToken&&e.match(/^:/))return"operator";if(e.match(/^end/))return"number"}if(e.match(/^=>/))return"operator";if(e.match(/^[0-9\.]/,!1)){var p=RegExp(/^im\b/),d=!1;if(e.match(/^\d*\.(?!\.)\d+([ef][\+\-]?\d+)?/i)&&(d=!0),e.match(/^\d+\.(?!\.)\d*/)&&(d=!0),e.match(/^\.\d+/)&&(d=!0),e.match(/^0x\.[0-9a-f]+p[\+\-]?\d+/i)&&(d=!0),d)return e.match(p),t.leavingExpr=!0,"number";var E=!1;if(e.match(/^0x[0-9a-f]+/i)&&(E=!0),e.match(/^0b[01]+/i)&&(E=!0),e.match(/^0o[0-7]+/i)&&(E=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(E=!0),e.match(/^0(?![\dx])/i)&&(E=!0),E)return e.match(p),t.leavingExpr=!0,"number"}if(e.match(/^<:/))return"operator";if(e.match(F))return"builtin";if(!r&&e.match(y)||e.match(/:\./))return"builtin";if(e.match(/^{[^}]*}(?=\()/))return"builtin";if(e.match(u))return"operator";if(e.match(b))return t.tokenize=c(e.current()),t.tokenize(e,t);if(e.match(A))return"meta";if(e.match(f))return null;if(e.match(v))return"keyword";if(e.match(g))return"builtin";var P=t.isDefinition||"function"==t.lastToken||"macro"==t.lastToken||"type"==t.lastToken||"immutable"==t.lastToken;return e.match(l)?P?"."===e.peek()?(t.isDefinition=!0,"variable"):(t.isDefinition=!1,"def"):e.match(/^({[^}]*})*\(/,!1)?o(e,t):(t.leavingExpr=!0,"variable"):(e.next(),s)}function o(e,t){var r=e.match(/^(\(\s*)/);if(r&&(t.firstParenPos<0&&(t.firstParenPos=t.scopes.length),t.scopes.push("("),t.charsAdvanced+=r[1].length),"("==i(t)&&e.match(/^\)/)&&(t.scopes.pop(),t.charsAdvanced+=1,t.scopes.length<=t.firstParenPos)){var n=e.match(/^\s*?=(?!=)/,!1);return e.backUp(t.charsAdvanced),t.firstParenPos=-1,t.charsAdvanced=0,n?"def":"builtin"}if(e.match(/^$/g,!1)){for(e.backUp(t.charsAdvanced);t.scopes.length>t.firstParenPos+1;)t.scopes.pop();return t.firstParenPos=-1,t.charsAdvanced=0,"builtin"}return t.charsAdvanced+=e.match(/^([^()]*)/)[1].length,o(e,t)}function c(e){function r(r,o){for(;!r.eol();)if(r.eatWhile(/[^'"\\]/),r.eat("\\")){if(r.next(),n&&r.eol())return i}else{if(r.match(e))return o.tokenize=a,i;r.eat(/['"]/)}if(n){if(t.singleLineStringErrors)return s;o.tokenize=a}return i}for(;"bruv".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n="'"==e,i="string";return r.isString=!0,r}var s="error",u=t.operators||/^\.?[|&^\\%*+\-<>!=\/]=?|\?|~|:|\$|\.[<>]|<<=?|>>>?=?|\.[<>=]=|->?|\/\/|\bin\b(?!\()|[\u2208\u2209](?!\()/,f=t.delimiters||/^[;,()[\]{}]/,l=t.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*!*/,h=["begin","function","type","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],m=["end","else","elseif","catch","finally"],p=["if","else","elseif","while","for","begin","let","end","do","try","catch","finally","return","break","continue","global","local","const","export","import","importall","using","function","macro","module","baremodule","type","immutable","quote","typealias","abstract","bitstype"],d=["true","false","nothing","NaN","Inf"],b=/^(`|'|"{3}|([brv]?"))/,v=r(p),g=r(d),k=r(h),x=r(m),A=/^@[_A-Za-z][_A-Za-z0-9]*/,y=/^:[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*!*/,F=/^::[^.,;"{()=$\s]+({[^}]*}+)*/,E={startState:function(){return{tokenize:a,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,charsAdvanced:0,firstParenPos:-1}},token:function(e,t){var r=t.tokenize(e,t),n=e.current();return n&&r&&(t.lastToken=n),"."===n&&(r=e.match(l,!1)||e.match(A,!1)||e.match(/\(/,!1)?"operator":s),r},indent:function(t,r){var n=0;return("end"==r||"]"==r||"}"==r||"else"==r||"elseif"==r||"catch"==r||"finally"==r)&&(n=-1),(t.scopes.length+n)*e.indentUnit},lineComment:"#",fold:"indent",electricChars:"edlsifyh]}"};return E}),e.defineMIME("text/x-julia","julia")});