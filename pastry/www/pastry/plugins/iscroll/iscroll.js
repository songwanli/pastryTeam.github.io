!function(o,t){function r(o){return""===n?o:(o=o.charAt(0).toUpperCase()+o.substr(1),n+o)}var e=Math,l=t.createElement("div").style,n=function(){for(var o="t,webkitT,MozT,msT,OT".split(","),t,r=0,e=o.length;e>r;r++)if(t=o[r]+"ransform",t in l)return o[r].substr(0,o[r].length-1);return!1}(),s=n?"-"+n.toLowerCase()+"-":"",i=r("transform"),a=r("transitionProperty"),c=r("transitionDuration"),p=r("transformOrigin"),m=r("transitionTimingFunction"),h=r("transitionDelay"),u=/android/gi.test(navigator.appVersion),S=/iphone|ipad/gi.test(navigator.appVersion),d=/hp-tablet/gi.test(navigator.appVersion),b=r("perspective")in l,f="ontouchstart"in o&&!d,x=n!==!1,g=r("transition")in l,y="onorientationchange"in o?"orientationchange":"resize",v=f?"touchstart":"mousedown",Y=f?"touchmove":"mousemove",T=f?"touchend":"mouseup",X=f?"touchcancel":"mouseup",w=function(){if(n===!1)return!1;var o={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return o[n]}(),_=function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(o){return setTimeout(o,1)}}(),z=function(){return o.cancelRequestAnimationFrame||o.webkitCancelAnimationFrame||o.webkitCancelRequestAnimationFrame||o.mozCancelRequestAnimationFrame||o.oCancelRequestAnimationFrame||o.msCancelRequestAnimationFrame||clearTimeout}(),M=b?" translateZ(0)":"",E=function(r,e){var l=this,n;l.wrapper="object"==typeof r?r:t.getElementById(r),l.wrapper.style.overflow="hidden",l.scroller=l.wrapper.children[0],l.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:u,hideScrollbar:S,fadeScrollbar:S&&b,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(o){o.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(n in e)l.options[n]=e[n];l.x=l.options.x,l.y=l.options.y,l.options.useTransform=x&&l.options.useTransform,l.options.hScrollbar=l.options.hScroll&&l.options.hScrollbar,l.options.vScrollbar=l.options.vScroll&&l.options.vScrollbar,l.options.zoom=l.options.useTransform&&l.options.zoom,l.options.useTransition=g&&l.options.useTransition,l.options.zoom&&u&&(M=""),l.scroller.style[a]=l.options.useTransform?s+"transform":"top left",l.scroller.style[c]="0",l.scroller.style[p]="0 0",l.options.useTransition&&(l.scroller.style[m]="cubic-bezier(0.33,0.66,0.66,1)"),l.options.useTransform?l.scroller.style[i]="translate("+l.x+"px,"+l.y+"px)"+M:l.scroller.style.cssText+=";position:absolute;top:"+l.y+"px;left:"+l.x+"px",l.options.useTransition&&(l.options.fixedScrollbar=!0),l.refresh(),l._bind(y,o),l._bind(v),f||"none"!=l.options.wheelAction&&(l._bind("DOMMouseScroll"),l._bind("mousewheel")),l.options.checkDOMChanges&&(l.checkDOMTime=setInterval(function(){l._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(o){var t=this;switch(o.type){case v:if(!f&&0!==o.button)return;t._start(o);break;case Y:t._move(o);break;case T:case X:t._end(o);break;case y:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(o);break;case w:t._transitionEnd(o)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(o){var r=this,l;return r[o+"Scrollbar"]?(r[o+"ScrollbarWrapper"]||(l=t.createElement("div"),r.options.scrollbarClass?l.className=r.options.scrollbarClass+o.toUpperCase():l.style.cssText="position:absolute;z-index:100;"+("h"==o?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),l.style.cssText+=";pointer-events:none;"+s+"transition-property:opacity;"+s+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(l),r[o+"ScrollbarWrapper"]=l,l=t.createElement("div"),r.options.scrollbarClass||(l.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+s+"background-clip:padding-box;"+s+"box-sizing:border-box;"+("h"==o?"height:100%":"width:100%")+";"+s+"border-radius:3px;border-radius:3px"),l.style.cssText+=";pointer-events:none;"+s+"transition-property:"+s+"transform;"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+s+"transition-duration:0;"+s+"transform: translate(0,0)"+M,r.options.useTransition&&(l.style.cssText+=";"+s+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[o+"ScrollbarWrapper"].appendChild(l),r[o+"ScrollbarIndicator"]=l),"h"==o?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=e.max(e.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=e.max(e.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),r._scrollbarPos(o,!0),void 0):(r[o+"ScrollbarWrapper"]&&(x&&(r[o+"ScrollbarIndicator"].style[i]=""),r[o+"ScrollbarWrapper"].parentNode.removeChild(r[o+"ScrollbarWrapper"]),r[o+"ScrollbarWrapper"]=null,r[o+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var o=this;setTimeout(function(){o.refresh()},u?200:0)},_pos:function(o,t){this.zoomed||(o=this.hScroll?o:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[i]="translate("+o+"px,"+t+"px) scale("+this.scale+")"+M:(o=e.round(o),t=e.round(t),this.scroller.style.left=o+"px",this.scroller.style.top=t+"px"),this.x=o,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(o,t){var r=this,l="h"==o?r.x:r.y,n;r[o+"Scrollbar"]&&(l=r[o+"ScrollbarProp"]*l,0>l?(r.options.fixedScrollbar||(n=r[o+"ScrollbarIndicatorSize"]+e.round(3*l),8>n&&(n=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=n+"px"),l=0):l>r[o+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?l=r[o+"ScrollbarMaxScroll"]:(n=r[o+"ScrollbarIndicatorSize"]-e.round(3*(l-r[o+"ScrollbarMaxScroll"])),8>n&&(n=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=n+"px",l=r[o+"ScrollbarMaxScroll"]+(r[o+"ScrollbarIndicatorSize"]-n))),r[o+"ScrollbarWrapper"].style[h]="0",r[o+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1",r[o+"ScrollbarIndicator"].style[i]="translate("+("h"==o?l+"px,0)":"0,"+l+"px)")+M)},_start:function(t){var r=this,l=f?t.touches[0]:t,n,s,a,c,p;r.enabled&&(r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,t),(r.options.useTransition||r.options.zoom)&&r._transitionTime(0),r.moved=!1,r.animating=!1,r.zoomed=!1,r.distX=0,r.distY=0,r.absDistX=0,r.absDistY=0,r.dirX=0,r.dirY=0,r.options.zoom&&f&&t.touches.length>1&&(c=e.abs(t.touches[0].pageX-t.touches[1].pageX),p=e.abs(t.touches[0].pageY-t.touches[1].pageY),r.touchesDistStart=e.sqrt(c*c+p*p),r.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-2*r.wrapperOffsetLeft)/2-r.x,r.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-2*r.wrapperOffsetTop)/2-r.y,r.options.onZoomStart&&r.options.onZoomStart.call(r,t)),r.options.momentum&&(r.options.useTransform?(n=getComputedStyle(r.scroller,null)[i].replace(/[^0-9\-.,]/g,"").split(","),s=+(n[12]||n[4]),a=+(n[13]||n[5])):(s=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,""),a=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")),(s!=r.x||a!=r.y)&&(r.options.useTransition?r._unbind(w):z(r.aniTime),r.steps=[],r._pos(s,a),r.options.onScrollEnd&&r.options.onScrollEnd.call(r))),r.absStartX=r.x,r.absStartY=r.y,r.startX=r.x,r.startY=r.y,r.pointX=l.pageX,r.pointY=l.pageY,r.startTime=t.timeStamp||Date.now(),r.options.onScrollStart&&r.options.onScrollStart.call(r,t),r._bind(Y,o),r._bind(T,o),r._bind(X,o))},_move:function(o){var t=this,r=f?o.touches[0]:o,l=r.pageX-t.pointX,n=r.pageY-t.pointY,s=t.x+l,a=t.y+n,c,p,m,h=o.timeStamp||Date.now();return t.options.onBeforeScrollMove&&t.options.onBeforeScrollMove.call(t,o),t.options.zoom&&f&&o.touches.length>1?(c=e.abs(o.touches[0].pageX-o.touches[1].pageX),p=e.abs(o.touches[0].pageY-o.touches[1].pageY),t.touchesDist=e.sqrt(c*c+p*p),t.zoomed=!0,m=1/t.touchesDistStart*t.touchesDist*this.scale,m<t.options.zoomMin?m=.5*t.options.zoomMin*Math.pow(2,m/t.options.zoomMin):m>t.options.zoomMax&&(m=2*t.options.zoomMax*Math.pow(.5,t.options.zoomMax/m)),t.lastScale=m/this.scale,s=this.originX-this.originX*t.lastScale+this.x,a=this.originY-this.originY*t.lastScale+this.y,this.scroller.style[i]="translate("+s+"px,"+a+"px) scale("+m+")"+M,t.options.onZoom&&t.options.onZoom.call(t,o),void 0):(t.pointX=r.pageX,t.pointY=r.pageY,(s>0||s<t.maxScrollX)&&(s=t.options.bounce?t.x+l/2:s>=0||t.maxScrollX>=0?0:t.maxScrollX),(a>t.minScrollY||a<t.maxScrollY)&&(a=t.options.bounce?t.y+n/2:a>=t.minScrollY||t.maxScrollY>=0?t.minScrollY:t.maxScrollY),t.distX+=l,t.distY+=n,t.absDistX=e.abs(t.distX),t.absDistY=e.abs(t.distY),t.absDistX<6&&t.absDistY<6||(t.options.lockDirection&&(t.absDistX>t.absDistY+5?(a=t.y,n=0):t.absDistY>t.absDistX+5&&(s=t.x,l=0)),t.moved=!0,t._pos(s,a),t.dirX=l>0?-1:0>l?1:0,t.dirY=n>0?-1:0>n?1:0,h-t.startTime>300&&(t.startTime=h,t.startX=t.x,t.startY=t.y),t.options.onScrollMove&&t.options.onScrollMove.call(t,o)),void 0)},_end:function(r){if(!f||0===r.touches.length){var l=this,n=f?r.changedTouches[0]:r,s,a,p={dist:0,time:0},m={dist:0,time:0},h=(r.timeStamp||Date.now())-l.startTime,u=l.x,S=l.y,d,b,x,g,y;if(l._unbind(Y,o),l._unbind(T,o),l._unbind(X,o),l.options.onBeforeScrollEnd&&l.options.onBeforeScrollEnd.call(l,r),l.zoomed)return y=l.scale*l.lastScale,y=Math.max(l.options.zoomMin,y),y=Math.min(l.options.zoomMax,y),l.lastScale=y/l.scale,l.scale=y,l.x=l.originX-l.originX*l.lastScale+l.x,l.y=l.originY-l.originY*l.lastScale+l.y,l.scroller.style[c]="200ms",l.scroller.style[i]="translate("+l.x+"px,"+l.y+"px) scale("+l.scale+")"+M,l.zoomed=!1,l.refresh(),l.options.onZoomEnd&&l.options.onZoomEnd.call(l,r),void 0;if(!l.moved)return f&&(l.doubleTapTimer&&l.options.zoom?(clearTimeout(l.doubleTapTimer),l.doubleTapTimer=null,l.options.onZoomStart&&l.options.onZoomStart.call(l,r),l.zoom(l.pointX,l.pointY,1==l.scale?l.options.doubleTapZoom:1),l.options.onZoomEnd&&setTimeout(function(){l.options.onZoomEnd.call(l,r)},200)):this.options.handleClick&&(l.doubleTapTimer=setTimeout(function(){for(l.doubleTapTimer=null,s=n.target;1!=s.nodeType;)s=s.parentNode;"SELECT"!=s.tagName&&"INPUT"!=s.tagName&&"TEXTAREA"!=s.tagName&&(a=t.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!0,r.view,1,n.screenX,n.screenY,n.clientX,n.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null),a._fake=!0,s.dispatchEvent(a))},l.options.zoom?250:0))),l._resetPos(400),l.options.onTouchEnd&&l.options.onTouchEnd.call(l,r),void 0;if(300>h&&l.options.momentum&&(p=u?l._momentum(u-l.startX,h,-l.x,l.scrollerW-l.wrapperW+l.x,l.options.bounce?l.wrapperW:0):p,m=S?l._momentum(S-l.startY,h,-l.y,l.maxScrollY<0?l.scrollerH-l.wrapperH+l.y-l.minScrollY:0,l.options.bounce?l.wrapperH:0):m,u=l.x+p.dist,S=l.y+m.dist,(l.x>0&&u>0||l.x<l.maxScrollX&&u<l.maxScrollX)&&(p={dist:0,time:0}),(l.y>l.minScrollY&&S>l.minScrollY||l.y<l.maxScrollY&&S<l.maxScrollY)&&(m={dist:0,time:0})),p.dist||m.dist)return x=e.max(e.max(p.time,m.time),10),l.options.snap&&(d=u-l.absStartX,b=S-l.absStartY,e.abs(d)<l.options.snapThreshold&&e.abs(b)<l.options.snapThreshold?l.scrollTo(l.absStartX,l.absStartY,200):(g=l._snap(u,S),u=g.x,S=g.y,x=e.max(g.time,x))),l.scrollTo(e.round(u),e.round(S),x),l.options.onTouchEnd&&l.options.onTouchEnd.call(l,r),void 0;if(l.options.snap)return d=u-l.absStartX,b=S-l.absStartY,e.abs(d)<l.options.snapThreshold&&e.abs(b)<l.options.snapThreshold?l.scrollTo(l.absStartX,l.absStartY,200):(g=l._snap(l.x,l.y),(g.x!=l.x||g.y!=l.y)&&l.scrollTo(g.x,g.y,g.time)),l.options.onTouchEnd&&l.options.onTouchEnd.call(l,r),void 0;l._resetPos(200),l.options.onTouchEnd&&l.options.onTouchEnd.call(l,r)}},_resetPos:function(o){var t=this,r=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,e=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return r==t.x&&e==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==n&&(t.hScrollbarWrapper.style[h]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&("webkit"==n&&(t.vScrollbarWrapper.style[h]="300ms"),t.vScrollbarWrapper.style.opacity="0"),void 0):(t.scrollTo(r,e,o||0),void 0)},_wheel:function(o){var t=this,r,e,l,n,s;if("wheelDeltaX"in o)r=o.wheelDeltaX/12,e=o.wheelDeltaY/12;else if("wheelDelta"in o)r=e=o.wheelDelta/12;else{if(!("detail"in o))return;r=e=3*-o.detail}return"zoom"==t.options.wheelAction?(s=t.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),s<t.options.zoomMin&&(s=t.options.zoomMin),s>t.options.zoomMax&&(s=t.options.zoomMax),s!=t.scale&&(!t.wheelZoomCount&&t.options.onZoomStart&&t.options.onZoomStart.call(t,o),t.wheelZoomCount++,t.zoom(o.pageX,o.pageY,s,400),setTimeout(function(){t.wheelZoomCount--,!t.wheelZoomCount&&t.options.onZoomEnd&&t.options.onZoomEnd.call(t,o)},400)),void 0):(l=t.x+r,n=t.y+e,l>0?l=0:l<t.maxScrollX&&(l=t.maxScrollX),n>t.minScrollY?n=t.minScrollY:n<t.maxScrollY&&(n=t.maxScrollY),t.maxScrollY<0&&t.scrollTo(l,n,0),void 0)},_transitionEnd:function(o){var t=this;o.target==t.scroller&&(t._unbind(w),t._startAni())},_startAni:function(){var o=this,t=o.x,r=o.y,l=Date.now(),n,s,i;if(!o.animating){if(!o.steps.length)return o._resetPos(400),void 0;if(n=o.steps.shift(),n.x==t&&n.y==r&&(n.time=0),o.animating=!0,o.moved=!0,o.options.useTransition)return o._transitionTime(n.time),o._pos(n.x,n.y),o.animating=!1,n.time?o._bind(w):o._resetPos(0),void 0;i=function(){var a=Date.now(),c,p;return a>=l+n.time?(o._pos(n.x,n.y),o.animating=!1,o.options.onAnimationEnd&&o.options.onAnimationEnd.call(o),o._startAni(),void 0):(a=(a-l)/n.time-1,s=e.sqrt(1-a*a),c=(n.x-t)*s+t,p=(n.y-r)*s+r,o._pos(c,p),o.animating&&(o.aniTime=_(i)),void 0)},i()}},_transitionTime:function(o){o+="ms",this.scroller.style[c]=o,this.hScrollbar&&(this.hScrollbarIndicator.style[c]=o),this.vScrollbar&&(this.vScrollbarIndicator.style[c]=o)},_momentum:function(o,t,r,l,n){var s=6e-4,i=e.abs(o)/t,a=i*i/(2*s),c=0,p=0;return o>0&&a>r?(p=n/(6/(a/i*s)),r+=p,i=i*r/a,a=r):0>o&&a>l&&(p=n/(6/(a/i*s)),l+=p,i=i*l/a,a=l),a*=0>o?-1:1,c=i/s,{dist:a,time:e.round(c)}},_offset:function(o){for(var t=-o.offsetLeft,r=-o.offsetTop;o=o.offsetParent;)t-=o.offsetLeft,r-=o.offsetTop;return o!=this.wrapper&&(t*=this.scale,r*=this.scale),{left:t,top:r}},_snap:function(o,t){var r=this,l,n,s,i,a,c;for(s=r.pagesX.length-1,l=0,n=r.pagesX.length;n>l;l++)if(o>=r.pagesX[l]){s=l;break}for(s==r.currPageX&&s>0&&r.dirX<0&&s--,o=r.pagesX[s],a=e.abs(o-r.pagesX[r.currPageX]),a=a?e.abs(r.x-o)/a*500:0,r.currPageX=s,s=r.pagesY.length-1,l=0;s>l;l++)if(t>=r.pagesY[l]){s=l;break}return s==r.currPageY&&s>0&&r.dirY<0&&s--,t=r.pagesY[s],c=e.abs(t-r.pagesY[r.currPageY]),c=c?e.abs(r.y-t)/c*500:0,r.currPageY=s,i=e.round(e.max(a,c))||200,{x:o,y:t,time:i}},_bind:function(o,t,r){(t||this.scroller).addEventListener(o,this,!!r)},_unbind:function(o,t,r){(t||this.scroller).removeEventListener(o,this,!!r)},destroy:function(){var t=this;t.scroller.style[i]="",t.hScrollbar=!1,t.vScrollbar=!1,t._scrollbar("h"),t._scrollbar("v"),t._unbind(y,o),t._unbind(v),t._unbind(Y,o),t._unbind(T,o),t._unbind(X,o),t.options.hasTouch||(t._unbind("DOMMouseScroll"),t._unbind("mousewheel")),t.options.useTransition&&t._unbind(w),t.options.checkDOMChanges&&clearInterval(t.checkDOMTime),t.options.onDestroy&&t.options.onDestroy.call(t)},refresh:function(){var o=this,t,r,l,n,s=0,i=0;if(o.scale<o.options.zoomMin&&(o.scale=o.options.zoomMin),o.wrapperW=o.wrapper.clientWidth||1,o.wrapperH=o.wrapper.clientHeight||1,o.minScrollY=-o.options.topOffset||0,o.scrollerW=e.round(o.scroller.offsetWidth*o.scale),o.scrollerH=e.round((o.scroller.offsetHeight+o.minScrollY)*o.scale),o.maxScrollX=o.wrapperW-o.scrollerW,o.maxScrollY=o.wrapperH-o.scrollerH+o.minScrollY,o.dirX=0,o.dirY=0,o.options.onRefresh&&o.options.onRefresh.call(o),o.hScroll=o.options.hScroll&&o.maxScrollX<0,o.vScroll=o.options.vScroll&&(!o.options.bounceLock&&!o.hScroll||o.scrollerH>o.wrapperH),o.hScrollbar=o.hScroll&&o.options.hScrollbar,o.vScrollbar=o.vScroll&&o.options.vScrollbar&&o.scrollerH>o.wrapperH,t=o._offset(o.wrapper),o.wrapperOffsetLeft=-t.left,o.wrapperOffsetTop=-t.top,"string"==typeof o.options.snap)for(o.pagesX=[],o.pagesY=[],n=o.scroller.querySelectorAll(o.options.snap),r=0,l=n.length;l>r;r++)s=o._offset(n[r]),s.left+=o.wrapperOffsetLeft,s.top+=o.wrapperOffsetTop,o.pagesX[r]=s.left<o.maxScrollX?o.maxScrollX:s.left*o.scale,o.pagesY[r]=s.top<o.maxScrollY?o.maxScrollY:s.top*o.scale;else if(o.options.snap){for(o.pagesX=[];s>=o.maxScrollX;)o.pagesX[i]=s,s-=o.wrapperW,i++;for(o.maxScrollX%o.wrapperW&&(o.pagesX[o.pagesX.length]=o.maxScrollX-o.pagesX[o.pagesX.length-1]+o.pagesX[o.pagesX.length-1]),s=0,i=0,o.pagesY=[];s>=o.maxScrollY;)o.pagesY[i]=s,s-=o.wrapperH,i++;o.maxScrollY%o.wrapperH&&(o.pagesY[o.pagesY.length]=o.maxScrollY-o.pagesY[o.pagesY.length-1]+o.pagesY[o.pagesY.length-1])}o._scrollbar("h"),o._scrollbar("v"),o.zoomed||(o.scroller.style[c]="0",o._resetPos(400))},scrollTo:function(o,t,r,e){var l=this,n=o,s,i;for(l.stop(),n.length||(n=[{x:o,y:t,time:r,relative:e}]),s=0,i=n.length;i>s;s++)n[s].relative&&(n[s].x=l.x-n[s].x,n[s].y=l.y-n[s].y),l.steps.push({x:n[s].x,y:n[s].y,time:n[s].time||0});l._startAni()},scrollToElement:function(o,t){var r=this,l;o=o.nodeType?o:r.scroller.querySelector(o),o&&(l=r._offset(o),l.left+=r.wrapperOffsetLeft,l.top+=r.wrapperOffsetTop,l.left=l.left>0?0:l.left<r.maxScrollX?r.maxScrollX:l.left,l.top=l.top>r.minScrollY?r.minScrollY:l.top<r.maxScrollY?r.maxScrollY:l.top,t=void 0===t?e.max(2*e.abs(l.left),2*e.abs(l.top)):t,r.scrollTo(l.left,l.top,t))},scrollToPage:function(o,t,r){var e=this,l,n;r=void 0===r?400:r,e.options.onScrollStart&&e.options.onScrollStart.call(e),e.options.snap?(o="next"==o?e.currPageX+1:"prev"==o?e.currPageX-1:o,t="next"==t?e.currPageY+1:"prev"==t?e.currPageY-1:t,o=0>o?0:o>e.pagesX.length-1?e.pagesX.length-1:o,t=0>t?0:t>e.pagesY.length-1?e.pagesY.length-1:t,e.currPageX=o,e.currPageY=t,l=e.pagesX[o],n=e.pagesY[t]):(l=-e.wrapperW*o,n=-e.wrapperH*t,l<e.maxScrollX&&(l=e.maxScrollX),n<e.maxScrollY&&(n=e.maxScrollY)),e.scrollTo(l,n,r)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(Y,o),this._unbind(T,o),this._unbind(X,o)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(w):z(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(o,t,r,e){var l=this,n=r/l.scale;l.options.useTransform&&(l.zoomed=!0,e=void 0===e?200:e,o=o-l.wrapperOffsetLeft-l.x,t=t-l.wrapperOffsetTop-l.y,l.x=o-o*n+l.x,l.y=t-t*n+l.y,l.scale=r,l.refresh(),l.x=l.x>0?0:l.x<l.maxScrollX?l.maxScrollX:l.x,l.y=l.y>l.minScrollY?l.minScrollY:l.y<l.maxScrollY?l.maxScrollY:l.y,l.scroller.style[c]=e+"ms",l.scroller.style[i]="translate("+l.x+"px,"+l.y+"px) scale("+r+")"+M,l.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},l=null,"undefined"!=typeof exports?exports.iScroll=E:o.iScroll=E}(window,document);