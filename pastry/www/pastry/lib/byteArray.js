define(["~/lib/libex"],function(e){return e.string2Bytes=function(r,o){var t,n,i=[];if(o&&"unicode"!==o.toLowerCase()){if("utf8"===o.toLowerCase())r=e.unicode2Utf8(r);else{if("gbk"!==o.toLowerCase())return null;r=e.unicode2Ansi(r)}for(t=0,n=r.length;n>t;t++)i.push(r.charCodeAt(t))}else for(t=0,n=r.length;n>t;t++)i.push(r.charCodeAt(t)>>8),i.push(255&r.charCodeAt(t));return i},e.bytes2String=function(r,o){var t,n,i="";if(o&&"unicode"!==o.toLowerCase()){for(t=0,n=r.length;n>t;t++)i+=String.fromCharCode(r[t]);return"utf8"===o.toLowerCase()?e.utf82Unicode(i):"gbk"===o.toLowerCase()?e.ansi2Unicode(i):null}for(t=0,n=r.length;n>t;t+=2)i+=String.fromCharCode((r[t]<<8)+r[t+1]);return i},e});