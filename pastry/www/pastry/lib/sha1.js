define(["~/lib/byteArray"],function(r){function n(r){for(var n="",t=7;t>=0;t--)n+=o.charAt(r>>4*t&15);return n}function t(r){for(var n=(r.length+8>>6)+1,t=new Array(16*n),e=0;16*n>e;e++)t[e]=0;for(e=0;e<r.length;e++)t[e>>2]|=r[e]<<24-e%4*8;return t[e>>2]|=128<<24-e%4*8,t[16*n-1]=8*r.length,t}function e(r,n){var t=(65535&r)+(65535&n),e=(r>>16)+(n>>16)+(t>>16);return e<<16|65535&t}function u(r,n){return r<<n|r>>>32-n}function f(r,n,t,e){return 20>r?n&t|~n&e:40>r?n^t^e:60>r?n&t|n&e|t&e:n^t^e}function a(r){return 20>r?1518500249:40>r?1859775393:60>r?-1894007588:-899497514}function i(r){for(var i=t(r),o=new Array(80),h=1732584193,c=-271733879,y=-1732584194,g=271733878,s=-1009589776,B=0;B<i.length;B+=16){for(var v=h,l=c,A=y,H=g,S=s,b,w=0;80>w;w++)16>w?o[w]=i[B+w]:o[w]=u(o[w-3]^o[w-8]^o[w-14]^o[w-16],1),b=e(e(u(h,5),f(w,c,y,g)),e(e(s,o[w]),a(w))),s=g,g=y,y=u(c,30),c=h,h=b;h=e(h,v),c=e(c,l),y=e(y,A),g=e(g,H),s=e(s,S)}return n(h)+n(c)+n(y)+n(g)+n(s)}var o="0123456789ABCDEF";return r.Sha1={getHashByBytes:i,getHashByString:function(n,t){return t||(t="utf8"),this.getHashByBytes(r.string2Bytes(n,t))}},r.Sha1});