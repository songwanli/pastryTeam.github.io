define(["~/lib/libex"],function(e){function n(e){return e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-.":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}function r(e){return e?/[^A-Za-z0-9\._-]/g:/[^A-Za-z0-9\+\/=]/g}function t(e,r){var t=n(r),i="",a,c,h="",u,f,d,A="",o=0;do a=e[o++],c=e[o++],h=e[o++],u=a>>2,f=(3&a)<<4|c>>4,d=(15&c)<<2|h>>6,A=63&h,isNaN(c)?d=A=64:isNaN(h)&&(A=64),i=i+t.charAt(u)+t.charAt(f)+t.charAt(d)+t.charAt(A),a=c=h="",u=f=d=A="";while(o<e.length);return i}function i(e,t){var i=n(t),a=[],c,h,u,f,d,A,o,l=0;if(e.length%4!==0)return"";var s=r(t);if(s.exec(e))return"";do f=i.indexOf(e.charAt(l++)),d=i.indexOf(e.charAt(l++)),A=i.indexOf(e.charAt(l++)),o=i.indexOf(e.charAt(l++)),c=f<<2|d>>4,h=(15&d)<<4|A>>2,u=(3&A)<<6|o,a.push(c),64!==A&&a.push(h),64!==o&&a.push(u),c=h=u="",f=d=A=o="";while(l<e.length);return a}return e.Base64={encode:t,decode:i},e.Base64});