define(["js/core","js/request"],function(t,e){var n,r,u,s,a,i;return a=/^\/projects\/([^\/]+)\/.*$/.exec(location.pathname),a?(i=a[1],n="/emulators/"+i,r=t.api._,u=e.prototype.fetch,s="~/plugins/jquery.softKeyboard/jquery.softKeyboard.encryptor",require([s],function(){return requirejs.s.contexts._.defined[s]=function(){return{"default":function(){var t,e,r;return t=function(t,e){$.ajax({dataType:"jsonp",url:n+"/getPassword?data="+JSON.stringify({text:t}),timeout:1500,success:function(t){e(t.value)},error:function(){e("")}})},e="",r="",{reset:function(){return e=""},onDelete:function(n){e=e.substring(0,e.length-1),t(e,function(t){r=t,n(t)})},onInput:function(n,u){e+=n,r=t(e,function(t){r=t,u(t)})},getValue:function(){return r}}}}}}),e.prototype.fetch=function(){var t,e,s;return console.log("%cproxy: [%s] %s %o","color:#ff00ff",this.request.requestId,this.request.url,this.request),s=this.request.url,r.startsWith(s,"client:///")?u.call(this):(e=this,t=this.request.data,s=n+"/proxy/"+s,s+=s.indexOf("?")?"&":"?",s+="data="+JSON.stringify(t),$.ajax({dataType:"jsonp",url:s,timeout:15e3,success:function(t){e.complete(t)}}))},t.Emulator={init:function(t,e){return null==t&&(t={}),null==e&&(e=this.alertCallback),$.ajax({dataType:"jsonp",url:n+"/init?data="+JSON.stringify({server:t.targetServer,handshakeData:t.handshakeData||{}}),timeout:15e3,success:function(t){e("success",t)}})},exit:function(t){return null==t&&(t=this.alertCallback),$.ajax({dataType:"jsonp",url:n+"/exit",timeout:15e3,success:function(e){t("success",e)}})},alertCallback:function(t,e){alert(JSON.stringify(e,null,"  "))}}):void 0});